$(function(){
    var data = [
        {
            "businessName": "常用js插件",
            "children": [
                {
                    "name": "简单requireJS原理实现",
                    "detailOption": [
                        {
                            "name": "require原理实现",
                            "description": "<div>1.目录结构</div><div><br></div><div><div><img img-id=\"1565580121206\" src=\"data:image/png;base64,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\"></div></div><div><br></div><div>2.index.html</div><div><br></div><div>&lt;!DOCTYPE html&gt;</div><div>&lt;html lang=\"en\"&gt;</div><div>&lt;head&gt;</div><div>&nbsp; &nbsp; &lt;meta charset=\"UTF-8\"&gt;</div><div>&nbsp; &nbsp; &lt;title&gt;简单requireJS原理&lt;/title&gt;</div><div>&lt;/head&gt;</div><div>&lt;body&gt;</div><div>&lt;script src=\"myRequire.js\" type=\"text/javascript\"&gt;&lt;/script&gt;</div><div>&lt;script type=\"text/javascript\"&gt;</div><div>&nbsp; &nbsp; require(['myModule'], function (myModule) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; var name = myModule.getName();</div><div>&nbsp; &nbsp; &nbsp; &nbsp; console.log(name);</div><div>&nbsp; &nbsp; });</div><div>&lt;/script&gt;</div><div>&lt;/body&gt;</div><div>&lt;/html&gt;</div><div><br></div><div>2.myRequires.js</div><div>(function () {</div><div>&nbsp; &nbsp; //存储已经加载好的模块</div><div>&nbsp; &nbsp; var moduleCache = {};</div><div>&nbsp;</div><div>&nbsp; &nbsp; var require = function (deps, callback) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; var params = [];</div><div>&nbsp; &nbsp; &nbsp; &nbsp; var depCount = 0;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; var i, len, isEmpty = false, modName;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; //获取当前正在执行的js代码段，这个在onLoad事件之前执行</div><div>&nbsp; &nbsp; &nbsp; &nbsp; modName = document.currentScript &amp;&amp; document.currentScript.id || 'REQUIRE_MAIN';</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; //简单实现，这里未做参数检查，只考虑数组的情况</div><div>&nbsp; &nbsp; &nbsp; &nbsp; if (deps.length) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (i = 0, len = deps.length; i &lt; len; i++) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (function (i) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //依赖加一</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; depCount++;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //这块回调很关键</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; loadMod(deps[i], function (param) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; params[i] = param;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; depCount--;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (depCount == 0) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; saveModule(modName, params, callback);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; })(i);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; } else {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isEmpty = true;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; if (isEmpty) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setTimeout(function () {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; saveModule(modName, null, callback);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }, 0);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; };</div><div>&nbsp;</div><div>&nbsp; &nbsp; //考虑最简单逻辑即可</div><div>&nbsp; &nbsp; var _getPathUrl = function (modName) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; var url = modName;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; //不严谨</div><div>&nbsp; &nbsp; &nbsp; &nbsp; if (url.indexOf('.js') == -1) url = url + '.js';</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return url;</div><div>&nbsp; &nbsp; };</div><div>&nbsp;</div><div>&nbsp; &nbsp; //模块加载</div><div>&nbsp; &nbsp; var loadMod = function (modName, callback) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; var url = _getPathUrl(modName), fs, mod;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; //如果该模块已经被加载</div><div>&nbsp; &nbsp; &nbsp; &nbsp; if (moduleCache[modName]) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mod = moduleCache[modName];</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (mod.status == 'loaded') {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setTimeout(callback(this.params), 0);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //如果未到加载状态直接往onLoad插入值，在依赖项加载好后会解除依赖</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mod.onload.push(callback);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; } else {</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /*</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;这里重点说一下Module对象</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;status代表模块状态</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;onLoad事实上对应requireJS的事件回调，该模块被引用多少次变化执行多少次回调，通知被依赖项解除依赖</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mod = moduleCache[modName] = {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; modName: modName,</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status: 'loading',</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; export: null,</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onload: [callback]</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _script = document.createElement('script');</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _script.id = modName;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _script.type = 'text/javascript';</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _script.charset = 'utf-8';</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _script.async = true;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _script.src = url;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //这段代码在这个场景中意义不大，注释了</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; &nbsp; &nbsp; _script.onload = function (e) {};</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fs = document.getElementsByTagName('script')[0];</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fs.parentNode.insertBefore(_script, fs);</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; };</div><div>&nbsp;</div><div>&nbsp; &nbsp; var saveModule = function (modName, params, callback) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; var mod, fn;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; if (moduleCache.hasOwnProperty(modName)) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mod = moduleCache[modName];</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mod.status = 'loaded';</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //输出项</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mod.export = callback ? callback(params) : null;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //解除父类依赖，这里事实上使用事件监听较好</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while (fn = mod.onload.shift()) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fn(mod.export);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; } else {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; callback &amp;&amp; callback.apply(window, params);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; };</div><div>&nbsp;</div><div>&nbsp; &nbsp; window.require = require;</div><div>&nbsp; &nbsp; window.define = require;</div><div>})();</div><div>3.myModule.js</div><div>define([], function () {</div><div>&nbsp; &nbsp; return {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; getName: function () {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return '徐同保';</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; };</div><div>});</div><div><br></div>"
                        }
                    ]
                }              
            ]
        }
    ]

    //更新windowData
    window.windowData &&  addData(window.windowData, data);
    !window.windowData && (window.windowData = data);
})


